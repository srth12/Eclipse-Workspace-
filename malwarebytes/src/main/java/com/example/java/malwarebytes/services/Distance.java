package com.example.java.malwarebytes.services;

import com.example.java.malwarebytes.dto.GeoLocation;

public class Distance {

    private static final int RADIUS_IN_MILES = 3956;

    /**
     * Get the distance between two points using Haversine method
     * @param geoLocationA
     * @param geoLocationB
     * @return
     */
    public static double getHaversineDistance(GeoLocation geoLocationA, GeoLocation geoLocationB) {

        var lon1 = Math.toRadians(geoLocationA.getLongitude());
        var lon2 = Math.toRadians(geoLocationB.getLongitude());
        var lat1 = Math.toRadians(geoLocationA.getLatitude());
        var lat2 = Math.toRadians(geoLocationB.getLatitude());

        // Haversine formula
        double diffLon = lon2 - lon1;
        double diffLat = lat2 - lat1;
        double a = Math.pow(Math.sin(diffLat / 2), 2)
                + Math.cos(lat1) * Math.cos(lat2)
                * Math.pow(Math.sin(diffLon / 2), 2);
        double c = 2 * Math.asin(Math.sqrt(a));

        return (c * RADIUS_IN_MILES);
    }
}
